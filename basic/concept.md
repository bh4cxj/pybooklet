# 基本概念

本章讲介绍一些程序设计的基本概念，其中的绝大多数，不仅仅适用于Python，也适用于其他语言。

## 字面常量
所谓字面常量，就是*如同字面意义*的常量。如数值、字符串等都是字面常量。

```python
"hello python"
1
9.234e-3
```

以上这些都是字面常量。之所以称它们为字面常量有两层意思，一是常量：例如数值`1`总是代表数值`1`，它的值不能被修改。二是字面： 例如数值`1`，它总是代表我们所看到的数值`1`，而不会是其他对象。

单独出现的字面常量通常是无意义的。这很好理解，当字面常量不与其他对象发生作用的话，它仅仅代表它**如同字面的意义**。但是，单独出现的字面常量并非完全没用，在某些特殊的位置出现的字符串字面常量，会被解释器当做**docstring**，这就是我们所说的自文档。本章将不会展开说。

除了docstring， 我们应该尽量避免使用字面常量。除非某些已经确定，并且永远不可能修改的常量。例如：时间的进制之类的。


## 变量

变量，我们可以认为它是一个标识符，它可以让我们存储任何信息，又可以对它们做处理。变量通常由两部分构成，标识符和值。

每个值，是内存上的一块区域，标识符相当于这块区域的名称，通过标识符，我们可以使用这块区域，这就是变量。

变量，故名思议，是可变的，这里的可变，指的是值是可变的，被标识符命名的内存区域，可以存储其他的信息。

### 命名规范
然而，为了解释器能够正确识别，变量名需要遵守一定的命名规范，总结下来就是：

* 变量名首字符必须是**字母**或者**下划线**
* 变量名其他字符必须是**字母**、**数字**、或者**下划线**

以上两点是Python强制的命名规范，如果不遵守这个规范，解释器讲抛出错误，你的程序无法运行。

Python还有一个官方的编码风格的指导规范[PEP-8](http://legacy.python.org/dev/peps/pep-0008/)，不遵守这个规范，不会造成程序错误，但是不管何时，建议遵守PEP-8规范，这样有利于团队合作以及一些自动化工具。

Python是区分大小写的语言， 变量`myname`和`myName`是不同的。对于大多数人来说，这点不会构成困扰，然而对于长时间使用Basic等不区分大小写的语言的人来说，必须牢记这点。另外，在不区分大小写的操作系统上，可能会造成一些困扰，在介绍包的时候，会详细说明。


## 类型

我们知道，Python是一种强类型语言。那么，什么是类型？什么是强类型呢？变量的值，是内存上的一块区域。但是解释器是如何使用数据的呢？为了使用数据，需要对这块区域规范一组操作，以及这组操作之间的关系。这就是类型。对相同的类型，操作和操作之间的关系总是不变的。所以，类型的本质就是：**操作和操作之间的关系**。

*或许你有点难以理解，但是没关系，你可以在你写代码几年之后，再回过头来想一想类型的本质，这对你深入理解程序运行会有一些帮助*

Python是动态语言，变量的类型是可变的，在赋值的时候，由解释器判断类型。这一过程称之为**类型推断**。
```python
i = 1       # i -> int
s = "hello" # s -> str
s = i       # s -> int
```

上面的语句在Python里是合法的，最终，`s`的类型是`int`

Python是强类型语言，虽然，变量的类型是可变的，但是在计算的时候，Python会做类型检查，如果类型不匹配，将会执行**隐式类型转换**， 如果无法转换，将抛出`TypeError`异常。

```python
i = 1
s = "1"
i + s  # raise TypeError
```

由于`i`是int类型， `s`是str类型，当我们把一个整型和一个字符串相加的时候，由于无法完成隐式类型转化，抛出了TypeError异常。Python的隐式类型转换的规则非常简单，将在本章的后面详细讲解。


Python的内置类型非常丰富，但是又非常简单。常用的内置类型分为几类：

* 数值类型
* 字符串类型
* 容器类型

### 数值类型
Python的数值类型非常简单，主要有一下三种：

* 整型`int`和`long`
* 浮点型`float`
* 复数`complex`

#### 整型

在Python中，整型有两种类型，`int`和`long`，`int`和`long`所能表示的整数范围不同。`int`能表示的最大整数范围为`-(sys.maxint +1) ~ sys.maxint`， `sys.maxint`根据系统不同而不同，一般64位系统下`sys.maxint`的值为`9223372036854775807`。`long`的取值范围为**无限大**。然而，在Python中，当一个整数超出`int`的表示范围的时候，会自动转化为`long`，而`int`和`long`的操作完全一样，所以，如果不是与其他语言交互，我们无需关注`int`和`long`的区别。

整型有以下几种字面表示方法：

* 单独的十进制整数， 例如：`10`
* `0x`或`0X`开头的十六进制整数(字母部分不区分大小写), 例如：`0xaa`
* `0o`或`0O`开头的八进制整数，例如：`0o77`
* `0b`或`0B`开头的二进制数，例如`0b11`
* 以上所有都可以在结尾加上`l`或者`L`表示为`long`型，否则，解释器自动判断是`int`还是`long`

#### 浮点型

Python只有一种浮点数类型`float`，浮点型的精度区间为`sys.float_info.min ~ sys.float_info.max`。精度区间，并不代表浮点数的表示范围。

大于`sys.float_info.max`的浮点数，表示为`inf`代表无穷大， 小于`-sys.float_info.max`的浮点数， 表示为`-inf`，代表无穷小。`inf`和`-inf`不能直接使用， 但是可以通过`float('inf')`和`float('-inf')`得到。无穷大和无穷小和数学上定义的一样，表现出一些特殊的特性。例如：

```python
infinity = float("inf")
infinity / 10000        # inf
10000 / infinity        # 0.0
```

浮点型有两种表示方法， 直接表示和科学计数法表示，例如`1.0` `1.1` `1e32` `1e-27`等都表示浮点数。

#### 复数
整型和浮点型都表示实数， Python还把复数`complex`作为了基本内置类型。`complex`类型分虚部和实部，虚部使用后缀`j`或`J`表示，实部和虚部使用`+`连接。 复数的一般表示方法为 `real + imag`。 如果实部为`0`也可以省略实部。虚部为`0`则不能省略(省略之后就变为实数了)。

复数的实部和虚部可以分别是整型和浮点型，遵循整型和浮点型的规则。


#### 数值类型隐式转化规则
数值类型只可以隐式转化为数值类型，并且遵循**低表达能力向高表达能力的单向转化**。Python数值类型的表达能力，从低到高为`int` < `long` < `float` < `complex`。

这个很好理解，`long`的表示范围大于`int`，所以表达能力比`int`高， `float`相对于`long`来说， 可以表示小数，所以表达能力比`long`高， 而实数可以看成是虚部为`0`的复数，所以`complex`表达能力高于`float`。 下面的几个例子展示了数值类型的隐式转化。

```python
9223372036854775808 + 1   # long + int = long
1 + 1.1                   # int + float = float
1.1 + (1 + 1.2j)          # float + complex = complex
```